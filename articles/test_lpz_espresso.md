[содержание](../readme.md)

# UI-тестирование. Espresso (Лабораторная работа)

## Теория

Фреймворк Espresso позволяет находить View на экране, выполнять с ними какие-то действия и проверять выполнение условий.

Для подключения Espresso нужно в зависимости приложения добавить модули:

```
androidTestImplementation 'androidx.test:runner:1.2.0'
androidTestImplementation 'androidx.test:rules:1.2.0'
```

Простейший тест на Espresso может выглядеть следующим образом:

```kt
@RunWith(AndroidJUnit4::class)
class MainActivityTest{
    @Rule @JvmField
    val activityRule = ActivityTestRule(MainActivity::class.java)

    @Test
    fun testTypeLogin(){
        Espresso
            .onView(ViewMatchers.withId(R.id.loginEdit))
            .perform(typeText("MyLogin"))
            .check(matches(withText("MyLogin")))
    }
}
```

Мы указываем в качестве *Runner* класс *AndroidJUnit4*. Далее мы задаем правило (Rule), которое указывает, какую Activity запустить для тестов. И основное – в тестовом методе мы находим View с id loginEdit, выполняем над ней действие ввода текста "MyLogin" и проверяем что этот текст действительно появился в текстовом поле.

Это и есть общая схема всех тестов с Espresso:

1. Найти *View*, передав в метод onView объект Matcher.
2. Выполнить какие-то действия над этой View, передав в метод perform объект ViewAction.
3. Проверить состояние View, передав в метод check объект ViewAssertion. Обычно для создания объекта ViewAssertion используют метод matches, который принимает объект Matcher из пункта 1.

## Задание

Реализовать следующие UI-тесты с помощью Espresso в приложении авторизации, которое Вы писали на прошлых лабораторных:

1. Приложение запускается с пустыми полями ввода и кнопкой с корректным текстом.
2. При вводе пустого логина и нажатии на кнопку входа в поле ввода логина отображается ошибка.
3. При вводе пустого пароля и нажатии на кнопку входа в поле ввода пароля отображается ошибка.
4. При вводе корректных данных открывается следующий экран.
5. При вводе ошибочных данных в поле ввода логина отображается ошибка.


[содержание](../readme.md)
